# vi 편집기

각종 문서를 편집할 수 있는 텍스트 기반의 편집기로 리눅스 뿐만 아니라 유닉스 계열의 모든 운영체제에서 사용함
(vi는 Emacs와 함께 유닉스 환경에서 가장 많이 쓰임)

### 모드

**명령, 실행, 입력** 모드가 존재함



# 명령모드

![image-20210128165537975](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210128165537975.png)

위와 같이 왼쪽에 아무런 표시도 안뜨면 명령모드임

### 커서이동

| KEY     | 동작                      |
| ------- | ------------------------- |
| 0(zero) | 행의 처음으로 이동        |
| $       | 행의 마지막으로 이동      |
| G       | 문서의 마지막으로 이동    |
| gg      | 문서의 처음으로 이동      |
| W,w     | 다음 단어의 처음으로 이동 |
| E,e     | 단어의 끝으로 이동        |
| B,b     | 단어의 처음으로 이동      |
| h       | 커서를 왼쪽으로 이동      |
| j       | 커서를 아래로 이동        |
| k       | 커서를 위로 이동          |
| l       | 커서를 오른쪽으로 이동    |

### 입력모드 변경

입력 모드여도 `Esc`키를 누르면 다시 명령모드로 변환됨

| KEY           | 동작                                                  |
| ------------- | ----------------------------------------------------- |
| i             | 현재 위치에서 입력 모드로 변경                        |
| I(i의 대문자) | 행의 제일 처음에서 입력 모드로 변경                   |
| a             | 현재 위치에서 우측으로 한 칸 이동 후 입력 모드로 변경 |
| A             | 행의 제일 마지막에서 입력 모드로 변경                 |
| o             | 커서 아래에 새로운 행을 추가하고 입력모드로 변경      |
| s             | 현재 문자를 지우고 입력모드로 변경                    |
| S             | 현재 행의 모든 문자를 지우고 입력 모드로 변경         |

### 기타

| KEY       | 동작                                    |
| --------- | --------------------------------------- |
| x         | 커서가 있는 문자 삭제                   |
| X         | 커서가 있는 앞 문자 삭제                |
| dd        | 현재 커서의 행 삭제                     |
| 숫자 + dd | 현재 커서부터 숫자만큼 행 삭제          |
| yy        | 현재 커서가 있는 라인을 복사            |
| 숫자 + yy | 현재 커서부터 숫자만큼의 행을 복사      |
| p         | 복사한 내용을 현재 라인 이후에 붙여넣기 |
| P         | 복사한 내용을 현재 라인 이전에 붙여넣기 |



# 실행모드

### 검색

| KEY   | 동작                             |
| ----- | -------------------------------- |
| /패턴 | 뒤에 오는 패턴을 검색 (위부터)   |
| ?패턴 | 뒤에 오는 패턴을 검색 (아래부터) |

```linux
/pass -> pass라는 패턴을 검색
?pass -> pass라는 패턴을 검색
```

**/**

- 패턴이 검색 된 후 `n`키를 통해 아래 방향으로 계속 찾기
  패턴이 검색 된 후 `N`키를 통해 위 방향으로 계속 찾기

**?**

- 패턴이 검색 된 후 `N`키를 통해 아래 방향으로 계속 찾기
  패턴이 검색 된 후 `n`키를 통해 위 방향으로 계속 찾기

### 치환

| KEY                         | 동작             |
| --------------------------- | ---------------- |
| :[범위]s/[Old]/[New]/[옵션] | Old를 New로 치환 |

범위는 n혹은 n,n 혹은 %를 넣을 수 있음
g옵션을 주면 적용되는 라인의 모든 부분 변경
(g옵션을 주지 않으면 처음 찾은 부분만 변경)

```linux
:3s/Old/New/g -> 3번째줄만 모든 Old를 New로 치환함
```

### Shell 명령어

| KEY         | 동작                                  |
| ----------- | ------------------------------------- |
| :![명령어]  | vi를 잠시 중단하고 명령어 수행        |
| :.![명령어] | 수행한 명령의 결과를 vi 편집기로 출력 |

```linux
:! ls -l
```

위와 같이 명령어를 치면

![image-20210128175754892](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210128175754892.png)

명령어를 실행하고 바로 vi로 돌아올 수 있음

```linux
:.! ls -l
```

위와 같이 명령어를 치면

![image-20210128175920306](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210128175920306.png)

이렇게 결과가 vi 안에 출력됨

### 파일관련

| KEY         | 동작                                              |
| ----------- | ------------------------------------------------- |
| :e [파일명] | 파일열기                                          |
| :enew       | 현재 창을 닫고 빈 문서를 연다                     |
| :q          | 종료 (변경된 내용이 없을 경우)                    |
| :q!         | 강제 종료 (변경된 내용 무시하고 종료 = 저장 안됨) |
| :w          | 파일 저장                                         |
| :wq         | 파일 저장 후 종료                                 |

### 파일 및 실행 관련

| KEY             | 동작                                                      |
| --------------- | --------------------------------------------------------- |
| :w >> [파일명]  | 파일에 내용 추가                                          |
| :f              | 현재 작업중인 파일의 이름과, 라인 수                      |
| :[n]r [파일명]  | 파일의 내용을 현재 편집중인 파일의 n라인 다음 줄부터 삽입 |
| :[n]r! [명령어] | 명령어 실행결과를 파일의 n라인 다음 줄부터 삽입           |

### ETC

| KEY            | 동작                 |
| -------------- | -------------------- |
| :set ts=[숫자] | Tab 사이즈 조절      |
| :set nu        | Line number 활성화   |
| :set nonu      | Line number 비활성화 |
| :nohl          | High light 비활성화  |

`:set nu`을 실행할 시 다음과 같이 라인을 볼 수 있어 쉽게 편집이 가능
![image-20210128173859715](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210128173859715.png)